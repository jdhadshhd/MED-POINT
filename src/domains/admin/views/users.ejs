<!-- Admin Users List -->
<div class="page-header">
  <h1 class="page-title">Users</h1>
</div>

<div class="stats-grid" style="margin-bottom: 1.5rem;">
  <div class="stat-card">
    <div class="stat-info">
      <h3><%= userCounts.total %></h3>
      <p>Total Users</p>
    </div>
  </div>
  <div class="stat-card">
    <div class="stat-info">
      <h3><%= userCounts.admins %></h3>
      <p>Admins</p>
    </div>
  </div>
  <div class="stat-card">
    <div class="stat-info">
      <h3><%= userCounts.doctors %></h3>
      <p>Doctors</p>
    </div>
  </div>
  <div class="stat-card">
    <div class="stat-info">
      <h3><%= userCounts.patients %></h3>
      <p>Patients</p>
    </div>
  </div>
</div>

<div class="card">
  <div class="card-header">
    <h2 class="card-title">User List</h2>
    <div class="filter-buttons">
      <a href="/admin/users" class="btn <%= currentRole === 'all' ? 'btn-primary' : 'btn-outline' %>">All</a>
      <a href="/admin/users?role=ADMIN" class="btn <%= currentRole === 'ADMIN' ? 'btn-primary' : 'btn-outline' %>">Admins</a>
      <a href="/admin/users?role=DOCTOR" class="btn <%= currentRole === 'DOCTOR' ? 'btn-primary' : 'btn-outline' %>">Doctors</a>
      <a href="/admin/users?role=PATIENT" class="btn <%= currentRole === 'PATIENT' ? 'btn-primary' : 'btn-outline' %>">Patients</a>
    </div>
  </div>
  
  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Joined</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% if (users.length === 0) { %>
        <tr>
          <td colspan="5" style="text-align: center; padding: 2rem;">No users found</td>
        </tr>
        <% } else { %>
        <% users.forEach(function(user) { %>
        <tr>
          <td><%= user.name %></td>
          <td><%= user.email %></td>
          <td><span class="badge badge-<%= user.role.toLowerCase() %>"><%= user.role %></span></td>
          <td><%= new Date(user.createdAt).toLocaleDateString() %></td>
          <td>
            <button class="btn btn-outline btn-sm" disabled>View</button>
          </td>
        </tr>
        <% }); %>
        <% } %>
      </tbody>
    </table>
  </div>
  
  <% if (total > limit) { %>
  <div class="pagination">
    <% const totalPages = Math.ceil(total / limit); %>
    <% for (let i = 1; i <= totalPages; i++) { %>
    <a href="/admin/users?page=<%= i %><%= currentRole !== 'all' ? '&role=' + currentRole : '' %>" 
       class="btn <%= page === i ? 'btn-primary' : 'btn-outline' %> btn-sm"><%= i %></a>
    <% } %>
  </div>
  <% } %>
</div>

<style>
.filter-buttons {
  display: flex;
  gap: 0.5rem;
}

.pagination {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  padding-top: 1rem;
  border-top: 1px solid #eee;
}

.btn-sm {
  padding: 0.375rem 0.75rem;
  font-size: 0.85rem;
}
</style>
